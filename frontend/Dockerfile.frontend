# 使用 Node.js LTS slim 镜像
FROM node:22-slim

WORKDIR /app

# 安装 pnpm 并配置国内镜像
RUN npm config set registry https://registry.npmmirror.com/ && \
    npm install -g pnpm && \
    pnpm config set registry https://registry.npmmirror.com/

# 复制依赖定义并安装依赖
COPY package.json ./
RUN npm install

# 复制项目代码
COPY . .

EXPOSE 3000

# 启动 Nuxt 开发服务器
CMD ["npm", "run", "dev"]
